[Unit]
Description=Docker Application Container Engine
Documentation=https://docs.docker.com
After=network-online.target
Wants=network-online.target

[Service]
Type=notify

# Main Docker daemon
ExecStart={{ jetson_docker_bin_dir }}/dockerd --config-file={{ jetson_docker_daemon_config }}

# Reload behaviour
ExecReload=/bin/kill -s HUP $MAINPID

# Restart behaviour
Restart=always
RestartSec=2

# Resource limits - good defaults for Jetson, tune if needed
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity
TasksMax=infinity

# Required for containerised workloads
Delegate=yes
KillMode=process

TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
